[phases.setup]
# 1. Apt installs the specific Debian filenames required by WeasyPrint
aptPkgs = [
    "libglib2.0-0", 
    "libcairo2", 
    "libpango-1.0-0", 
    "libpangoft2-1.0-0", 
    "libpangocairo-1.0-0", 
    "libgdk-pixbuf2.0-0", 
    "shared-mime-info",
    "libffi-dev"
]

# 2. Nix installs the environment and Python
# The "..." is CRITICAL: it ensures Python is installed!
nixPkgs = ["...", "cairo", "pango", "gdk-pixbuf", "glib", "gobject-introspection", "fontconfig", "harfbuzz"]

[variables]
# 3. CRITICAL: Tell Python where to find the Apt libraries we just installed
LD_LIBRARY_PATH = "/usr/lib/x86_64-linux-gnu:/usr/lib:/lib"