{% extends "base.html" %}
{% block title %}Set new password | MPE UK Ltd{% endblock %}

{% block content %}
<section class="simple-hero">
  <div class="container">
    <h1>Set a new password</h1>
    <p class="muted">Choose a new password for your customer portal account.</p>
  </div>
</section>

<section class="simple-section">
  <div class="container auth-wrap">

    {% if validlink %}
      <form method="post" class="auth-card" novalidate>
        {% csrf_token %}

        {% if form.non_field_errors %}
          <div class="alert alert-danger">{{ form.non_field_errors }}</div>
        {% endif %}

        <div class="form-field">
          <label class="label" for="id_new_password1">New password</label>
          <input class="input" id="id_new_password1" type="password" name="new_password1" autocomplete="new-password" required>
          {% if form.new_password1.errors %}
            <div class="muted" style="margin-top:8px; color:var(--danger);">{{ form.new_password1.errors }}</div>
          {% endif %}
        </div>

        <div class="form-field">
          <label class="label" for="id_new_password2">Confirm new password</label>
          <input class="input" id="id_new_password2" type="password" name="new_password2" autocomplete="new-password" required>
          {% if form.new_password2.errors %}
            <div class="muted" style="margin-top:8px; color:var(--danger);">{{ form.new_password2.errors }}</div>
          {% endif %}
        </div>

        <div class="form-field">
          <button class="btn btn--primary btn-block" type="submit">Update password</button>
        </div>
      </form>
    {% else %}
      <div class="auth-card">
        <p class="muted" style="margin:0;">This password reset link is invalid or has expired. Please request a new one.</p>
        <div class="form-field" style="margin-top:16px;">
          <a class="btn btn--primary btn-block" href="{% url 'password_reset' %}">Request a new link</a>
        </div>
      </div>
    {% endif %}

  </div>
</section>
{% endblock %}
